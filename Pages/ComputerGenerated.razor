@page "/computergenerated"

<h3>Test yourself with some random lobbies</h3>

<div class="row pt-2">
    <div class="col">
        <button class="btn btn-outline-primary" @onclick="GetNewLobby">Generate New Lobby</button>
    </div>
</div>

<div class="row pt-2">
    <div class="col">
        <LobbyDetails @ref="_bd"></LobbyDetails>
    </div>
</div>


@code {
    LobbyDetails _bd = new LobbyDetails();
    public static int PERCENT_ELITES = 10;
    List<Foe> _foes = new List<Foe>();


    public void GetNewLobby()
    {
        Random rnd = new Random();
        _foes.Clear();
        _bd.Clear();


        // generate 5 random foes
        for (int cnt = 0; cnt < 5; cnt++)
        {
            Foe foe = new Foe();
            foe.Stars = rnd.Next(3, 6);

            int foetype = rnd.Next(0, 6);
            foe.Type = (FoeType)foetype;

            int isElite = rnd.Next(1, PERCENT_ELITES);
            foe.Elite = (isElite == 1) ? true : false;

            _foes.Add(foe);
        }


        //// Test case for 2 x 3 star pixies
        //_foes.AddRange(new Foe[] {
        //        new Foe(5, FoeType.Erkling),
        //        new Foe(5, FoeType.DeathEater),
        //        new Foe(3, FoeType.Pixie),
        //        new Foe(5, FoeType.DarkWizard),
        //        new Foe(3, FoeType.Pixie)
        //    });


        _bd.Foes = _foes.ToList();

        //_bd.CreateLobbyImage();

        _bd.Refresh();
    }
}


